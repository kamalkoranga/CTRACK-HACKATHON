{% extends "base.html" %}
{% import "bootstrap_wtf.html" as wtf %}

{% block content %}

  <!-- For index route -->
  {% if my_posts %}
    <ul class="list-unstyled d-flex justify-content-between mt-4">
      {% for post in my_posts %}
        <li><a href="{{ url_for('main.post_detail', post_id=post.id) }}" class="text-decoration-none text-primary">{{ post.body | truncate(10) }}</a></li>
      {% endfor %}
      <li><a href="{{ url_for('main.user', username=current_user.username) }}" class="link-primary link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover">View your posts</a></li>
    </ul>
  
  <!-- for explore route -->
  {% elif posts %}
    {% for post in posts %}
    <a href="{{ url_for('main.post_detail', post_id=post.id) }}" class="text-decoration-none text-dark">
      {% include '_post.html' %}
    </a>
    {% endfor %}

    <nav aria-label="Post navigation">
      <ul class="pagination">
        <li class="page-item{% if not prev_url %} disabled{% endif %}">
          <a class="page-link" href="{{ prev_url }}">
            <span aria-hidden="true">&larr;</span> Newer posts
          </a>
        </li>
        <li class="page-item{% if not next_url %} disabled{% endif %}">
          <a class="page-link" href="{{ next_url }}">
            Older posts <span aria-hidden="true">&rarr;</span>
          </a>
        </li>
      </ul>
    </nav>
  {% else %}
    <p class="text-muted text-center mt-4">No posts available.</p>
  {% endif %}

  <hr class="mt-4">

  {% if form %}
    {{ wtf.quick_form(form) }}
  {% endif %}
{% endblock %}